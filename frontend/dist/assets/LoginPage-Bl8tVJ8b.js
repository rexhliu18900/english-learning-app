import{u as x,o as L,c as R,w as t,e as q,f as z,r,a as l,d as o,g as B,b as m,E as f,h as C,i as g}from"./index-DVLVCbr2.js";import{L as M}from"./Layout-COh6nWmu.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"login-page"},U={class:"login-card"},E={class:"login-footer"},P={__name:"LoginPage",setup($){const c=q(),_=z(),v=x(),d=g(null),n=g(!1),s=C({email:"",password:""}),w={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少6位",trigger:"blur"}]};async function b(){if(!await d.value.validate().catch(()=>!1))return;n.value=!0;const e=await v.loginAction(s.email,s.password);if(n.value=!1,e.success){f.success("登录成功！");const a=_.query.redirect||"/dashboard";c.push(a)}else f.error(e.message||"登录失败")}return(p,e)=>{const a=r("el-input"),u=r("el-form-item"),y=r("el-button"),V=r("el-form"),k=r("el-link");return L(),R(M,null,{default:t(()=>[l("div",S,[l("div",U,[e[6]||(e[6]=l("h2",{class:"login-title"},"欢迎回来",-1)),e[7]||(e[7]=l("p",{class:"login-subtitle"},"登录您的账户",-1)),o(V,{ref_key:"formRef",ref:d,model:s,rules:w,"label-position":"top",onSubmit:B(b,["prevent"])},{default:t(()=>[o(u,{label:"邮箱",prop:"email"},{default:t(()=>[o(a,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=i=>s.email=i),type:"email",placeholder:"请输入邮箱地址","prefix-icon":"Message",size:"large"},null,8,["modelValue"])]),_:1}),o(u,{label:"密码",prop:"password"},{default:t(()=>[o(a,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=i=>s.password=i),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),o(u,null,{default:t(()=>[o(y,{type:"primary","native-type":"submit",loading:n.value,size:"large",style:{width:"100%"}},{default:t(()=>[...e[3]||(e[3]=[m(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",E,[e[5]||(e[5]=l("span",null,"还没有账号？",-1)),o(k,{type:"primary",onClick:e[2]||(e[2]=i=>p.$router.push("/register"))},{default:t(()=>[...e[4]||(e[4]=[m(" 立即注册 ",-1)])]),_:1})])])])]),_:1})}}},I=N(P,[["__scopeId","data-v-780df30d"]]);export{I as default};
