import{L as B}from"./Layout-COh6nWmu.js";import{u as S,j as E,o as u,c as $,w as o,i as f,r as n,a as s,t as r,k as D,d as e,b as _,l as g,F,m as I,n as L}from"./index-DVLVCbr2.js";import{g as N,a as V}from"./tests-DMguu1U4.js";import{g as q}from"./textbooks-CFMbxFRO.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"dashboard-page"},j={class:"welcome-section"},M={class:"welcome-content"},U={class:"quick-actions"},G={class:"stats-section"},H={class:"stat-card card"},J={class:"stat-value"},K={class:"stat-card card"},O={class:"stat-value"},W={class:"stat-card card"},X={class:"stat-value"},Y={class:"stat-card card"},Z={class:"stat-value"},tt={class:"features-section"},st={class:"recent-section card"},et={class:"section-header"},ot={key:0,class:"test-list"},at={class:"test-info"},lt={class:"test-scope"},nt={class:"test-date"},rt={class:"test-score"},dt={__name:"DashboardPage",setup(it){const w=S(),c=f({}),p=f([]),k=f([]);E(async()=>{await R()});async function R(){try{const[a,t,v]=await Promise.all([N(),V(1,5),q()]);c.value={totalTests:a.total_tests||0,totalQuestions:a.total_questions||0,correctRate:a.correct_rate||0},p.value=t||[],k.value=v||[]}catch(a){console.error("加载数据失败:",a)}}return(a,t)=>{const v=n("EditPen"),i=n("el-icon"),m=n("el-button"),y=n("ChatDotRound"),d=n("el-col"),b=n("el-row"),T=n("Document"),h=n("TrendCharts"),z=n("el-tag"),P=n("el-empty");return u(),$(B,null,{default:o(()=>{var x;return[s("div",Q,[s("div",j,[s("div",M,[s("h1",null,"你好，"+r((x=D(w).user)==null?void 0:x.name)+"！",1),t[6]||(t[6]=s("p",null,"今天也要继续努力学习英语哦~",-1))]),s("div",U,[e(m,{type:"primary",size:"large",onClick:t[0]||(t[0]=l=>a.$router.push("/test/generate"))},{default:o(()=>[e(i,null,{default:o(()=>[e(v)]),_:1}),t[7]||(t[7]=_(" 开始测试 ",-1))]),_:1}),e(m,{size:"large",onClick:t[1]||(t[1]=l=>a.$router.push("/chat"))},{default:o(()=>[e(i,null,{default:o(()=>[e(y)]),_:1}),t[8]||(t[8]=_(" AI对话 ",-1))]),_:1})])]),s("div",G,[e(b,{gutter:20},{default:o(()=>[e(d,{xs:12,sm:6},{default:o(()=>[s("div",H,[s("div",J,r(c.value.totalTests||0),1),t[9]||(t[9]=s("div",{class:"stat-label"},"测试次数",-1))])]),_:1}),e(d,{xs:12,sm:6},{default:o(()=>[s("div",K,[s("div",O,r(c.value.totalQuestions||0),1),t[10]||(t[10]=s("div",{class:"stat-label"},"完成题目",-1))])]),_:1}),e(d,{xs:12,sm:6},{default:o(()=>[s("div",W,[s("div",X,r(c.value.correctRate||0)+"%",1),t[11]||(t[11]=s("div",{class:"stat-label"},"正确率",-1))])]),_:1}),e(d,{xs:12,sm:6},{default:o(()=>[s("div",Y,[s("div",Z,r(k.value.length),1),t[12]||(t[12]=s("div",{class:"stat-label"},"教材数量",-1))])]),_:1})]),_:1})]),s("div",tt,[e(b,{gutter:20},{default:o(()=>[e(d,{xs:24,sm:8},{default:o(()=>[s("div",{class:"feature-card card",onClick:t[2]||(t[2]=l=>a.$router.push("/textbooks"))},[e(i,{size:"48",color:"#409eff"},{default:o(()=>[e(T)]),_:1}),t[13]||(t[13]=s("h3",null,"我的教材",-1)),t[14]||(t[14]=s("p",null,"管理学习教材，查看知识点",-1))])]),_:1}),e(d,{xs:24,sm:8},{default:o(()=>[s("div",{class:"feature-card card",onClick:t[3]||(t[3]=l=>a.$router.push("/chat"))},[e(i,{size:"48",color:"#67c23a"},{default:o(()=>[e(y)]),_:1}),t[15]||(t[15]=s("h3",null,"智能对话",-1)),t[16]||(t[16]=s("p",null,"基于教材的AI问答助手",-1))])]),_:1}),e(d,{xs:24,sm:8},{default:o(()=>[s("div",{class:"feature-card card",onClick:t[4]||(t[4]=l=>a.$router.push("/statistics"))},[e(i,{size:"48",color:"#e6a23c"},{default:o(()=>[e(h)]),_:1}),t[17]||(t[17]=s("h3",null,"学习统计",-1)),t[18]||(t[18]=s("p",null,"查看学习进度和成绩分析",-1))])]),_:1})]),_:1})]),s("div",st,[s("div",et,[t[20]||(t[20]=s("h2",null,"最近测试",-1)),e(m,{text:"",type:"primary",onClick:t[5]||(t[5]=l=>a.$router.push("/test/records"))},{default:o(()=>[...t[19]||(t[19]=[_(" 查看全部 ",-1)])]),_:1})]),p.value.length>0?(u(),g("div",ot,[(u(!0),g(F,null,I(p.value,l=>{var C;return u(),g("div",{class:"test-item",key:l.id},[s("div",at,[s("span",lt,r(((C=l.test_scope)==null?void 0:C.textbook_name)||"综合测试"),1),s("span",nt,r(D(L)(l.completed_at||l.started_at)),1)]),s("div",rt,[e(z,{type:l.score>=60?"success":"danger"},{default:o(()=>[_(r(l.score.toFixed(1))+"% ",1)]),_:2},1032,["type"])])])}),128))])):(u(),$(P,{key:1,description:"暂无测试记录"}))])])]}),_:1})}}},mt=A(dt,[["__scopeId","data-v-dd7ede94"]]);export{mt as default};
