import{u as k,o as U,c as z,w as o,e as R,r as t,a as i,d as s,g as q,b as d,E as f,h as C,i as _}from"./index-DVLVCbr2.js";import{L}from"./Layout-COh6nWmu.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"register-page"},M={class:"register-card"},N={class:"register-footer"},S={__name:"RegisterPage",setup($){const w=R(),b=k(),g=_(null),p=_(!1),r=C({user_type:"student",name:"",email:"",password:"",confirmPassword:""}),c={user_type:[{required:!0,message:"请选择账户类型",trigger:"change"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度2-20位",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,n)=>{e!==r.password?n(new Error("两次输入的密码不一致")):n()},trigger:"blur"}]};async function y(){if(!await g.value.validate().catch(()=>!1))return;p.value=!0;const e=await b.registerAction({email:r.email,password:r.password,user_type:r.user_type,name:r.name});p.value=!1,e.success?(f.success("注册成功！"),w.push("/dashboard")):f.error(e.message||"注册失败")}return(m,e)=>{const n=t("el-radio-button"),v=t("el-radio-group"),a=t("el-form-item"),u=t("el-input"),V=t("el-button"),x=t("el-form"),P=t("el-link");return U(),z(L,null,{default:o(()=>[i("div",E,[i("div",M,[e[11]||(e[11]=i("h2",{class:"register-title"},"创建账户",-1)),e[12]||(e[12]=i("p",{class:"register-subtitle"},"开始您的英语学习之旅",-1)),s(x,{ref_key:"formRef",ref:g,model:r,rules:c,"label-position":"top",onSubmit:q(y,["prevent"])},{default:o(()=>[s(a,{label:"账户类型",prop:"user_type"},{default:o(()=>[s(v,{modelValue:r.user_type,"onUpdate:modelValue":e[0]||(e[0]=l=>r.user_type=l),size:"large"},{default:o(()=>[s(n,{label:"student"},{default:o(()=>[...e[6]||(e[6]=[d("我是学生",-1)])]),_:1}),s(n,{label:"parent"},{default:o(()=>[...e[7]||(e[7]=[d("我是家长",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(a,{label:"姓名",prop:"name"},{default:o(()=>[s(u,{modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=l=>r.name=l),placeholder:"请输入姓名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),s(a,{label:"邮箱",prop:"email"},{default:o(()=>[s(u,{modelValue:r.email,"onUpdate:modelValue":e[2]||(e[2]=l=>r.email=l),type:"email",placeholder:"请输入邮箱地址","prefix-icon":"Message",size:"large"},null,8,["modelValue"])]),_:1}),s(a,{label:"密码",prop:"password"},{default:o(()=>[s(u,{modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=l=>r.password=l),type:"password",placeholder:"请输入密码（至少6位）","prefix-icon":"Lock",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),s(a,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[s(u,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=l=>r.confirmPassword=l),type:"password",placeholder:"请再次输入密码","prefix-icon":"Lock",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),s(a,null,{default:o(()=>[s(V,{type:"primary","native-type":"submit",loading:p.value,size:"large",style:{width:"100%"}},{default:o(()=>[...e[8]||(e[8]=[d(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),i("div",N,[e[10]||(e[10]=i("span",null,"已有账号？",-1)),s(P,{type:"primary",onClick:e[5]||(e[5]=l=>m.$router.push("/login"))},{default:o(()=>[...e[9]||(e[9]=[d(" 立即登录 ",-1)])]),_:1})])])])]),_:1})}}},j=B(S,[["__scopeId","data-v-3967ce48"]]);export{j as default};
